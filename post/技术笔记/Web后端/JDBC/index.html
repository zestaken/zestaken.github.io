<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <head>
    <link href="/styles/main.css" rel="stylesheet" type="text/css"/>

    <meta charset="UTF-8">
    
    <title>JDBC - ZestJourney</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/bootstrap/4.6.1/css/bootstrap.min.css">
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/bootstrap/4.6.1/js/bootstrap.min.js"></script>

<script src="https://npm.elemecdn.com/@waline/client@v2/dist/waline.js"></script>
<link
  rel="stylesheet"
  href="https://npm.elemecdn.com/@waline/client@v2/dist/waline.css"
/>
<meta name="generator" content="Hexo 5.4.2"></head>

</head>

<body>
    


        <div>
            <div class="container-fluid position-relative">
                <nav class="navbar navbar-expand-lg navbar-dark  text-white bg-transparent">
                    <div class="container">
                        
                        <a class="navbar-brand" href="/">ğŸ’–æˆ‘ä»¬çš„ç§˜å¯†åŸºåœ°ğŸ’–</a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
                            aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarText">
                            <ul class="navbar-nav mr-auto">
                            </ul>
                            <span class="navbar-text">
                                ğŸ’•æ„¿ä½ ä¸‰å†¬æš–ï¼Œæ„¿ä½ æ˜¥ä¸å¯’ğŸ‚
                            </span>
                        </div>
                    </div>
                </nav>
                <section class="lover-background"
                    style="background-image: url(/img/banner.jpg)">
                </section>
                <section
                    class="container lover-container d-flex flex-column align-content-center justify-content-center">
                    <div class="row align-items-center pb-5 lover">
                        <div class="col">
                            <div class="d-flex flex-column">
                                <img class="mx-auto avatar-img rounded-circle"
                                    src="/img/zestaken.jpg" alt="">
                                <h4 class="mx-auto text-white pt-2">  
                                    zestaken
                                </h4>
                            </div>
                        </div>
                        <div class="col">
                            <div class="d-flex justify-content-center">
                                <div class="heart"></div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="d-flex flex-column">
                                <img class="mx-auto avatar-img rounded-circle"
                                    src="/img/zinny.jpg" alt="">
                                <h4 class="mx-auto text-white pt-2">
                                    zinny
                                </h4>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="main-hero-waves-area waves-area">
                    <svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                        <defs>
                            <path id="gentle-wave"
                                d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z">
                            </path>
                        </defs>
                        <g class="parallax">
                            <use xlink:href="#gentle-wave" x="48" y="0"></use>
                            <use xlink:href="#gentle-wave" x="48" y="3"></use>
                            <use xlink:href="#gentle-wave" x="48" y="5"></use>
                            <use xlink:href="#gentle-wave" x="48" y="7"></use>
                        </g>
                    </svg>
                </section>
            </div>

            <div id="Pjax">

  <div class="list-content mx-auto mt-5">
      <div id="article" class="list-top">
          <h5 class="list-text"> JDBC
          </h5>
          <article>
              <article>
                <h1 id="jdbcæ¦‚å¿µ"><a class="markdownIt-Anchor" href="#jdbcæ¦‚å¿µ"></a> JDBCæ¦‚å¿µ</h1>
<ul>
<li>JDBCæ˜¯java database connectivityçš„ç¼©å†™ã€‚æ˜¯ä½¿ç”¨javaè¯­è¨€æ¥æ“ä½œæ•°æ®åº“ã€‚JDBCå®ç°äº†ä½¿ç”¨ç»Ÿä¸€çš„javaä»£ç æ¥æ“ä½œæ‰€æœ‰å…³ç³»å‹æ•°æ®åº“ã€‚</li>
<li>JDBCæ˜¯sunå…¬å¸å®šä¹‰çš„æ“ä½œæ‰€æœ‰å…³ç³»å‹æ•°æ®åº“çš„è§„åˆ™ï¼Œå³å®šä¹‰äº†ä¸€å¥—æ¥å£ã€‚</li>
<li>æ¯ä¸€ä¸ªæ•°æ®åº“å‚å•†å®ç°JDBCæ¥å£æ¥æ“ä½œè‡ªå·±çš„æ•°æ®åº“ã€‚è¿™äº›å®ç°ç±»çš„jaråŒ…å°±å«åš<strong>æ•°æ®åº“é©±åŠ¨</strong>ã€‚</li>
<li>MySQL 8.0 ä»¥ä¸Šç‰ˆæœ¬çš„æ•°æ®åº“è¿æ¥æœ‰æ‰€ä¸åŒï¼š
<ol>
<li>MySQL 8.0 ä»¥ä¸Šç‰ˆæœ¬é©±åŠ¨åŒ…ç‰ˆæœ¬ mysql-connector-java-8.0.16.jarã€‚</li>
<li><code>com.mysql.jdbc.Driver</code> æ›´æ¢ä¸º <code>com.mysql.cj.jdbc.Driver</code></li>
</ol>
</li>
</ul>
<h1 id="jdbcåŸºæœ¬ä½¿ç”¨"><a class="markdownIt-Anchor" href="#jdbcåŸºæœ¬ä½¿ç”¨"></a> JDBCåŸºæœ¬ä½¿ç”¨</h1>
<h2 id="1å¯¼å…¥é©±åŠ¨jaråŒ…åˆ°é¡¹ç›®ç›®å½•ä¸‹"><a class="markdownIt-Anchor" href="#1å¯¼å…¥é©±åŠ¨jaråŒ…åˆ°é¡¹ç›®ç›®å½•ä¸‹"></a> 1.å¯¼å…¥é©±åŠ¨jaråŒ…åˆ°é¡¹ç›®ç›®å½•ä¸‹</h2>
<ol>
<li>mysqlçš„jaråŒ…ä¸‹è½½:<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/connector/">å®˜ç½‘</a>;ä¸‹è½½æ—¶é€‰æ‹©platformIndependentï¼Œé€‰æ‹©5.xxçš„ç‰ˆæœ¬</li>
<li>å¤åˆ¶jaråŒ…åˆ°é¡¹ç›®çš„libsç›®å½•ä¸‹ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥å¯¼å…¥ï¼‰ï¼Œå³é”®-&gt;add as library</li>
</ol>
<h2 id="2-æ³¨å†Œé©±åŠ¨"><a class="markdownIt-Anchor" href="#2-æ³¨å†Œé©±åŠ¨"></a> 2. æ³¨å†Œé©±åŠ¨</h2>
<ul>
<li><code>  Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code>,ä¼šäº§ç”ŸClsaaNotFoundExceptionçš„å¼‚å¸¸ã€‚</li>
<li><code>The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.</code>:å¦‚æœå¯¹åº”çš„æ•°æ®åº“æœåŠ¡æœªå¼€å¯ï¼Œæˆ–è€…åå­—è¾“é”™äº†ï¼Œå°±ä¼šæŠ¥è¿™ä¸ªé”™ã€‚</li>
</ul>
<h2 id="3-è·å–æ•°æ®åº“çš„è¿æ¥å¯¹è±¡"><a class="markdownIt-Anchor" href="#3-è·å–æ•°æ®åº“çš„è¿æ¥å¯¹è±¡"></a> 3. è·å–æ•°æ®åº“çš„è¿æ¥å¯¹è±¡</h2>
<ul>
<li><code>Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/youth_study&quot;, &quot;root&quot;,&quot;root&quot;);</code>
<ul>
<li>å‚æ•°ä¾æ¬¡ä¸ºè¿æ¥åœ°å€ï¼Œç”¨æˆ·åï¼Œå¯†ç ã€‚</li>
<li>è¿æ¥åœ°å€ä¸­ï¼Œåé¢æ˜¯ä¸»æœºåï¼šç«¯å£/æ•°æ®åº“å</li>
</ul>
</li>
</ul>
<h2 id="4å®šä¹‰sql"><a class="markdownIt-Anchor" href="#4å®šä¹‰sql"></a> 4.å®šä¹‰sql</h2>
<ul>
<li><code>String sql = &quot;update t_branch set college_id = 2 where id = 1&quot;;</code>,å®šä¹‰ä¸€ä¸ªå­˜å‚¨sqlè¯­å¥çš„å­—ç¬¦ä¸²ã€‚</li>
</ul>
<h2 id="5è·å–æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡"><a class="markdownIt-Anchor" href="#5è·å–æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡"></a> 5.è·å–æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡</h2>
<ul>
<li><code>Statement  stmt = conn.createStatement();</code>connæ˜¯æ•°æ®åº“çš„è¿æ¥å¯¹è±¡ã€‚</li>
</ul>
<h2 id="6æ‰§è¡Œsqlæ¥å—è¿”å›ç»“æœ"><a class="markdownIt-Anchor" href="#6æ‰§è¡Œsqlæ¥å—è¿”å›ç»“æœ"></a> 6.æ‰§è¡Œsqlï¼Œæ¥å—è¿”å›ç»“æœï¼›</h2>
<ul>
<li><code> int count = stmt.executeUpdate(sql);</code></li>
<li><code> System.out.println(count);</code></li>
</ul>
<h2 id="7-é‡Šæ”¾èµ„æº"><a class="markdownIt-Anchor" href="#7-é‡Šæ”¾èµ„æº"></a> 7. é‡Šæ”¾èµ„æº</h2>
<ul>
<li><code>conn.close();</code></li>
<li><code>stmt.close();</code></li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">
package com;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

&#x2F;*
 * JDBCå…¥é—¨
 *&#x2F;
public class Jdbc1 &#123;
    public static void main(String[] args) throws ClassNotFoundException, SQLException &#123;
        &#x2F;&#x2F;æ³¨å†Œé©±åŠ¨
        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
        &#x2F;&#x2F;è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡
        Connection conn &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;3306&#x2F;youth_study&quot;, &quot;root&quot;,&quot;root&quot;);
        &#x2F;&#x2F;å®šä¹‰sqlè¯­å¥
        String sql &#x3D; &quot;update t_branch set college_id &#x3D; 2 where id &#x3D; 1&quot;;
        &#x2F;&#x2F; è·å–æ‰§è¡Œsqlçš„å¯¹è±¡
        Statement  stmt &#x3D; conn.createStatement();
        &#x2F;&#x2F; æ‰§è¡Œsql
        int count &#x3D; stmt.executeUpdate(sql);
        &#x2F;&#x2F; å¤„ç†ç»“æœ
        System.out.println(count);
        &#x2F;&#x2F; é‡Šæ”¾èµ„æº
        conn.close();
        stmt.close();
    &#125;
&#125;</code></pre>
<h1 id="jdbcå¯¹è±¡"><a class="markdownIt-Anchor" href="#jdbcå¯¹è±¡"></a> JDBCå¯¹è±¡</h1>
<h2 id="drivermanager"><a class="markdownIt-Anchor" href="#drivermanager"></a> DriverManager</h2>
<ul>
<li>é©±åŠ¨ç®¡ç†å¯¹è±¡</li>
<li>åŠŸèƒ½ï¼š
<ol>
<li>æ³¨å†Œé©±åŠ¨</li>
<li>è·å–æ•°æ®åº“çš„è¿æ¥</li>
</ol>
</li>
</ul>
<h3 id="æ³¨å†Œé©±åŠ¨"><a class="markdownIt-Anchor" href="#æ³¨å†Œé©±åŠ¨"></a> æ³¨å†Œé©±åŠ¨</h3>
<ul>
<li>å‘Šè¯‰ç¨‹åºè¯¥ä½¿ç”¨å“ªä¸€ä¸ªæ•°æ®åº“é©±åŠ¨jaråŒ…</li>
<li>æ–¹æ³•ï¼š<code>static void registerDriver(Driver driver)</code>,æ³¨å†Œä¸ç»™å®šçš„é©±åŠ¨ç¨‹åº</li>
<li>å®é™…ä½¿ç”¨ï¼š<code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></li>
<li>åœ¨com.mysql.jdbc.Driverçš„æºç ä¸­å­˜åœ¨é™æ€ä»£ç å—ï¼š</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">Static &#123;
      try &#123;
        java.sql.DriverManager.registerDriver(new Driver());
      &#125; catch (SQLException E) &#123;
        throw new RuntimeException(&quot;Can&#39;t register driver!&quot;);
      &#125;
&#125;</code></pre>
<ul>
<li>é€šè¿‡å¯¼å…¥jaråŒ…ï¼Œå°±ä¼šè‡ªåŠ¨æ³¨å†Œé©±åŠ¨ç¨‹åº</li>
</ul>
<h3 id="è·å–æ•°æ®åº“è¿æ¥"><a class="markdownIt-Anchor" href="#è·å–æ•°æ®åº“è¿æ¥"></a> è·å–æ•°æ®åº“è¿æ¥</h3>
<ul>
<li>è®©ç¨‹åºè¿æ¥åˆ°å…·ä½“çš„æ•°æ®åº“ï¼›</li>
<li>æ–¹æ³•ï¼š<code>static Connection getConnection(String url, String user, String password);</code></li>
<li>å‚æ•°ï¼š
<ul>
<li>url:æŒ‡å®šè¿æ¥æ•°æ®åº“çš„è·¯å¾„
<ul>
<li>è¯­æ³•ï¼š<code>jdbc:mysql://ipåœ°å€(åŸŸå):ç«¯å£å·/æ•°æ®åº“åç§°</code></li>
<li>ä¾‹å­ï¼š<code>jdbc:mysql://localhost:3306/db1</code></li>
<li>ç‰¹ä¾‹:å¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºmysqlçš„æœåŠ¡å™¨ï¼Œå¹¶ä¸”MySQLæœåŠ¡å™¨çš„é»˜è®¤ç«¯å£æ˜¯3306ï¼Œåˆ™URLå¯ä»¥ç®€å†™ä¸ºï¼š<code>jdbc:mysql:///æ•°æ®åº“åç§°</code></li>
</ul>
</li>
<li>user:ç”¨æˆ·å</li>
<li>passwordï¼šç”¨æˆ·å¯†ç </li>
</ul>
</li>
</ul>
<h2 id="connection"><a class="markdownIt-Anchor" href="#connection"></a> Connection</h2>
<ul>
<li>æ•°æ®åº“è¿æ¥å¯¹è±¡</li>
<li>åŠŸèƒ½ï¼š
<ol>
<li>è·å–æ‰§è¡Œsqlçš„å¯¹è±¡</li>
<li>ç®¡ç†äº‹åŠ¡</li>
</ol>
</li>
</ul>
<h3 id="è·å–æ‰§è¡Œsqlçš„å¯¹è±¡"><a class="markdownIt-Anchor" href="#è·å–æ‰§è¡Œsqlçš„å¯¹è±¡"></a> è·å–æ‰§è¡Œsqlçš„å¯¹è±¡</h3>
<ul>
<li>åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿæ¥æ”¶sqlè¯­å¥çš„å¯¹è±¡ï¼›</li>
<li>æ–¹æ³•ï¼š
<ul>
<li><code>Statement createStatement();</code></li>
<li><code>PreparedStatement prepareStatement(String sql);</code></li>
</ul>
</li>
</ul>
<h3 id="ç®¡ç†äº‹åŠ¡"><a class="markdownIt-Anchor" href="#ç®¡ç†äº‹åŠ¡"></a> ç®¡ç†äº‹åŠ¡</h3>
<ul>
<li>åŒ…å«å¤„ç†äº‹åŠ¡çš„å¼€å¯ï¼Œæäº¤ï¼Œå›æ»šçš„æ–¹æ³•ï¼›</li>
<li>å¼€å¯äº‹åŠ¡ï¼š<code>void setAutoCommit(boolean autoCommit);</code>,è°ƒç”¨è¯¥æ–¹æ³•å¹¶è®¾ç½®å‚æ•°ä¸º<strong>false</strong>ï¼Œå³å¯å¼€å¯äº‹åŠ¡ã€‚ï¼ˆå› ä¸ºè®¾ä¸ºtrueåˆ™ä»£è¡¨ç€ç€äº‹åŠ¡æ˜¯è‡ªåŠ¨æäº¤ï¼Œä¹Ÿå°±æ²¡æœ‰äººçš„ç®¡ç†ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰å¼€ä¸å¼€å¯äº‹åŠ¡ä¹‹è¯´ï¼‰,åœ¨æ‰§è¡Œsqlä¹‹å‰å¼€å¯äº‹åŠ¡ï¼ˆé€šå¸¸æ˜¯åˆšåˆ›å»ºè¿æ¥ç”ŸæˆConneectionå¯¹è±¡æ—¶ï¼‰ï¼Œç¤ºä¾‹ï¼š<code>conn.setAutoCommit(false);</code></li>
<li>æäº¤äº‹åŠ¡ï¼š<code>void commit()</code>ï¼Œåœ¨æ‰€æœ‰sqlæ‰§è¡Œå®Œæ—¶æäº¤ï¼Œç¤ºä¾‹ï¼š<code>conn.commit();</code></li>
<li>å›æ»šäº‹åŠ¡ï¼š<code>void rollback();</code>ï¼Œå›æ»šäº‹åŠ¡çš„æ“ä½œä¸€èˆ¬æ”¾åœ¨catchå—ä¸­ï¼Œå³å‡ºç°å¼‚å¸¸æ—¶æ‰å›æ»šã€‚è°ƒç”¨ç¤ºä¾‹ï¼š<code>conn.rollback();</code></li>
</ul>
<h2 id="statement"><a class="markdownIt-Anchor" href="#statement"></a> Statement</h2>
<ul>
<li>ç”¨äºæ‰§è¡Œ<strong>é™æ€SQLè¯­å¥</strong>å¹¶æ”¾å›å…¶ç”Ÿæˆçš„ç»“æœçš„å¯¹è±¡ã€‚</li>
<li><code>boolean execute(String sql);</code>,å¯ä»¥æ‰§è¡Œä»»æ„çš„sqlè¯­å¥ï¼Œä¸å¸¸ç”¨ã€‚</li>
<li><code>int executeUpdate(String sql);</code>:æ‰§è¡ŒDMLï¼ˆinsertï¼Œ updateï¼Œ deleteï¼‰è¯­å¥ï¼Œä¹Ÿå¯ä»¥æ‰§è¡ŒDDLï¼ˆcreateï¼Œ alter ï¼Œdropï¼‰è¯­å¥ï¼ˆä½†æ˜¯è¿™äº›æ“ä½œä¸€èˆ¬ä¸ä¼šä½¿ç”¨javaä»£ç å®ç°ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•å¸¸ç”¨äºæ‰§è¡ŒDMLè¯­å¥ï¼‰ã€‚
<ul>
<li>è¿”å›å€¼ï¼šè¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯<strong>æ‰§è¡Œè¯¥sqlè¯­å¥å½±å“çš„è¡Œæ•°</strong>ï¼Œé€šè¿‡è¿™ä¸ªè¿”å›å€¼æ¥åˆ¤æ–­sqlè¯­å¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼ˆè¿”å›å€¼&gt;0åˆ™æˆåŠŸï¼‰ã€‚</li>
</ul>
</li>
<li><code>ResultSet executeQuery(String sql);</code>:æ‰§è¡ŒDQLï¼ˆselectï¼‰è¯­å¥ã€‚</li>
</ul>
<h2 id="resultset"><a class="markdownIt-Anchor" href="#resultset"></a> ResultSet</h2>
<ul>
<li>ç»“æœé›†å¯¹è±¡ï¼Œå°è£…äº†æŸ¥è¯¢çš„ç»“æœï¼›</li>
<li>Resultå¯¹è±¡å¯ä»¥æƒ³è±¡ä¸ºæ˜¯ä¸€ä¸ªæŒ‡å‘æŸ¥è¯¢ç»“æœè¡¨çš„<strong>æ¸¸æ ‡</strong>ï¼ˆç±»ä¼¼cè¯­è¨€çš„æŒ‡é’ˆæ¦‚å¿µï¼‰ï¼Œè¿™ä¸ªâ€œæ¸¸æ ‡â€å¼€å§‹æ˜¯æŒ‡å‘è¡¨å¤´çš„ã€‚</li>
<li><code>boolean next() </code>:ä½¿æ¸¸æ ‡æŒ‡å‘ä¸‹ä¸€è¡Œï¼Œå¹¶åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›falseã€‚</li>
<li><code>getXxx(å‚æ•°)</code>:è·å–æŸä¸€ä¸ªæ•°æ®
<ul>
<li>Xxxï¼›ä»£è¡¨è¿”å›çš„æ•°æ®ç±»å‹ï¼Œä¸è¦æŸ¥è¯¢çš„æ•°æ®çš„æ•°æ®ç±»å‹ç›¸åŒ¹é…ã€å¦‚ï¼š<code>int getInt(), String getString()</code>;</li>
<li>å‚æ•°ï¼š
<ol>
<li>intç±»å‹çš„å‚æ•°ï¼šä»£è¡¨åˆ—çš„ç¼–å·ï¼Œä»å·¦å¾€å³æ•°ï¼Œä»1å¼€å§‹ã€‚å¦‚ï¼š<code>getString(1);</code>è¡¨ç¤ºå–å‡ºå½“å‰æ¸¸æ ‡æ‰€æŒ‡è¡Œçš„ç¬¬ä¸€åˆ—çš„æ•°æ®</li>
<li>Stringç±»å‹çš„å‚æ•°ï¼šä»£è¡¨åˆ—çš„åç§°ã€‚å¦‚:<code>getDouble(&quot;balance&quot;)</code>è¡¨ç¤ºå–å‡ºå½“å‰è¡Œåä¸ºbalanceåˆ—çš„æ•°æ®ã€‚</li>
</ol>
</li>
</ul>
</li>
<li>ä½¿ç”¨æ­¥éª¤ï¼š
<ol>
<li>æ¸¸æ ‡å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ</li>
<li>åˆ¤æ–­æ˜¯å¦æœ‰æ•°æ®</li>
<li>è·å–æ•°æ®</li>
<li>å¦‚æœæœ‰å¤šè¡Œæ•°æ®éœ€è¦è¾“å‡ºï¼Œåˆ™ä½¿ç”¨å¾ªç¯é‡å¤ä»¥ä¸Šä¸‰ä¸ªæ­¥éª¤ï¼Œå¯ä»¥éå†æ•´ä¸ªç»“æœé›†çš„æ•°æ®ã€‚</li>
</ol>
</li>
</ul>
<h2 id="preparedstatement"><a class="markdownIt-Anchor" href="#preparedstatement"></a> PreparedStatement</h2>
<ul>
<li>æ˜¯Statementçš„å­ç±»ï¼Œä½†æ˜¯åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼›</li>
<li>SQLæ³¨å…¥é—®é¢˜ï¼šåœ¨æ‹¼æ¥sqlè¯­å¥æ—¶ï¼Œæœ‰ä¸€äº›sqlçš„ç‰¹æ®Šå…³é”®å­—å‚ä¸å­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œä¼šé€ æˆsqlè¯­å¥çš„å«ä¹‰æ”¹å˜ï¼Œå¯¼è‡´å®‰å…¨é—®é¢˜ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š<code>String sql = &quot;select * from user where username = '&quot;+username+&quot;' and password = '&quot;+password+&quot;'&quot;</code>,å…¶ä¸­è¢«å•åŒå¼•å·åŒ…è£¹çš„æ˜¯ä¼ è¿›æ¥çš„å­—ç¬¦ä¸²å‚æ•°ã€‚(æ³¨æ„è¿™ç§æ‹¼æ¥å­—ç¬¦ä¸²çš„ç‰¹æ®Šæ ¼å¼)ã€‚è¿™ç§ç›´æ¥æ‹¼æ¥å‚æ•°çš„sqlè¯­å¥ä¹Ÿå«åš<strong>é™æ€sqlè¯­å¥</strong>ã€‚</li>
<li>å¦‚æœusername = â€œzhangsanâ€,password = â€œaâ€™ or â€˜aâ€™ = 'aâ€,é‚£ä¹ˆæ‹¼æ¥ä¸Šå‚æ•°çš„å€¼åçš„sqlè¯­å¥ä¸ºï¼š<code>sql = &quot;select * from user where username = '&quot;+&quot;zhangsan&quot;+&quot;' and password = '&quot;+&quot;a' or 'a' = 'a&quot;&quot;'&quot;</code>å°†åŒå¼•å·åˆå¹¶ä¹‹åä¸º:<code>sql = &quot;select * from user where username = 'zhangsan' and password = 'a' or 'a' = 'a'&quot;</code>,è¿™ä¸ªsqlè¯­å¥çš„å«ä¹‰å°±å’Œæˆ‘ä»¬åŸæœ¬çš„æƒ³è±¡å¤§ä¸ç›¸åŒäº†ã€‚</li>
</ul>
</li>
<li>è§£å†³SQLæ³¨å…¥é—®é¢˜ï¼šä½¿ç”¨PreparedStatementå¯¹è±¡æ›¿æ¢åŸæ¥çš„Statementå¯¹è±¡ã€‚</li>
<li><strong>é¢„ç¼–è¯‘çš„sqlè¯­å¥</strong>ï¼šå°†sqlè¯­å¥ä¸­çš„å‚æ•°ä½¿ç”¨å ä½ç¬¦<code>?</code>æ¥ä»£æ›¿ã€‚</li>
<li>ParparedStatementç±»å‹æ‰æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹é€šç”¨çš„JDBCä½¿ç”¨æ–¹æ³•ï¼›</li>
<li>å¯ä»¥é˜²æ­¢sqlæ³¨å…¥é—®é¢˜ï¼Œæ•ˆç‡æ›´é«˜ã€‚</li>
</ul>
<h3 id="ä½¿ç”¨æ­¥éª¤"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ­¥éª¤"></a> ä½¿ç”¨æ­¥éª¤</h3>
<ol>
<li>å¯¼å…¥é©±åŠ¨jaråŒ…</li>
<li>æ³¨å†Œé©±åŠ¨</li>
<li>è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡Connection</li>
<li>å®šä¹‰sqlè¯­å¥ï¼š
<ol>
<li>éœ€è¦å‚æ•°çš„åœ°æ–¹ä½¿ç”¨<code>?</code>æ¥ä»£æ›¿ã€‚å¦‚ï¼š<code>String sql = &quot;select * from user where username = ? and password = ?</code></li>
</ol>
</li>
<li>è·å–æ‰§è¡Œsqlè¯­å¥çš„PreparedStatementå¯¹è±¡ï¼šä½¿ç”¨Connection.prepareStatement(String sql)æ–¹æ³•ï¼Œå¦‚<code>PreparedStatement patmt = conn.prepareStatement(sql);</code></li>
<li>ç»™<code>?</code>å ä½ç¬¦èµ‹ä¸Šå‚æ•°çš„å€¼ï¼š</li>
</ol>
<ul>
<li>æ–¹æ³•ï¼š<code>setXxx(å‚æ•°1ï¼Œå‚æ•°2)</code>
<ul>
<li>Xxxæ˜¯å‚æ•°çš„ç±»å‹ï¼›</li>
<li>å‚æ•°1æ˜¯intç±»å‹ï¼šæ˜¯å‚æ•°åœ¨sqlè¯­å¥ä¸­çš„ç›¸å¯¹ä½ç½®æ¥å®šçš„ï¼Œä»å·¦å¾€å³ï¼Œä»1å¼€å§‹ç¼–å·ã€‚ç¬¬ä¸€ä¸ªå‚æ•°çš„å‚æ•°1å°±æ˜¯1</li>
<li>å‚æ•°2ï¼šå°±æ˜¯å…·ä½“çš„å‚æ•°ã€‚</li>
<li>ç¤ºä¾‹ï¼š<code>pstmt.setString(1,username);</code></li>
<li><code>pstmt.setString(2, password);</code></li>
</ul>
</li>
</ul>
<ol start="7">
<li>æ‰§è¡Œsqlï¼Œæ¥æ”¶è¿”å›ç»“æœï¼Œ<strong>ä¸éœ€è¦ä¼ é€’sqlè¯­å¥</strong>ï¼ˆä¸Statementä¸åŒï¼‰ï¼Œå¦‚ï¼š<code>ResultSet rs = pstmt.excuteQuery();</code></li>
<li>å¤„ç†ç»“æœ</li>
<li>é‡Šæ”¾èµ„æº</li>
</ol>
<h1 id="jdbcå·¥å…·ç±»"><a class="markdownIt-Anchor" href="#jdbcå·¥å…·ç±»"></a> JDBCå·¥å…·ç±»</h1>
<ul>
<li>ä½œç”¨ï¼šå°†é‡å¤çš„ä»£ç å°è£…è¿›ä¸€ä¸ªç±»ä¸­ï¼Œç®€åŒ–ä»£ç çš„ä¹¦å†™ã€‚</li>
<li>æŠ½å–çš„ä»£ç ï¼š
<ul>
<li>æ³¨å†Œé©±åŠ¨çš„ä»£ç ï¼›
<ul>
<li>é©±åŠ¨åªéœ€æ³¨å†Œä¸€æ¬¡ï¼Œæ‰€ä»¥ç›´æ¥åœ¨é™æ€ä»£ç å—ä¸­å®ç°</li>
</ul>
</li>
<li>æŠ½å–è·å–è¿æ¥å¯¹è±¡çš„ä»£ç ï¼š
<ul>
<li>éœ€æ±‚ï¼šä¸ä¼ é€’å‚æ•°çš„åŒæ—¶ï¼Œä¿è¯å·¥å…·ç±»çš„é€šç”¨æ€§ã€‚</li>
<li>è§£å†³æ–¹æ³•ï¼šä¹¦å†™<code>.properties</code>é…ç½®æ–‡ä»¶ã€‚æ­¤å¤„æ˜¯<code>jdbc.properties</code>æ–‡ä»¶.åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å°†è·å–è¿æ¥å¯¹è±¡çš„å‚æ•°å†™å¥½,ä¹‹åå†æ¬¡ä½¿ç”¨è¯¥å·¥å…·ç±»è¿æ¥ä¸åŒçš„æ•°æ®åº“æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ã€‚<strong>.propertiesæ–‡ä»¶æ˜¯ç›´æ¥æ”¾åœ¨srcæ–‡ä»¶å¤¹ä¸‹</strong>ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties">url &#x3D; jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;db3
user &#x3D; root
password &#x3D; root
driver &#x3D; com.mysql.jdbc.Driver</code></pre>
<ul>
<li>æŠ½å–é‡Šæ”¾èµ„æºçš„ä»£ç ã€‚</li>
<li>å·¥å…·ç±»çš„å®ç°ï¼šJDBCUtilsç±»</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">import java.io.FileReader;
import java.io.IOException;
import java.net.URL;
import java.sql.*;
import java.util.Properties;

public class JDBCUtils &#123;
    private static String url;
    private static String user;
    private static String password;
    private static String driver;

    &#x2F;*
     * æ–‡ä»¶çš„è¯»å–ï¼Œåªéœ€è¦è¯»å–ä¸€æ¬¡å³å¯æ‹¿åˆ°è¿™äº›å€¼ã€‚ä½¿ç”¨é™æ€ä»£ç å—ï¼Œåªè¯»å–ä¸€æ¬¡è¿™äº›å€¼
     *&#x2F;
    static &#123;
        try &#123;
            &#x2F;&#x2F;1. åˆ›å»ºPropertiesé›†åˆç±»
            Properties pro &#x3D; new Properties();
            &#x2F;&#x2F;2. è·å–srcè·¯å¾„ä¸‹çš„æ–‡ä»¶çš„æ–¹å¼:ä½¿ç”¨ClassLoaderç±»åŠ è½½å™¨
            &#x2F;&#x2F;è·å–srcæ–‡ä»¶å¤¹åœ¨è®¡ç®—æœºä¸­çš„ç»å¯¹è·¯å¾„
            ClassLoader classLoader &#x3D; JDBCUtils.class.getClassLoader();
            &#x2F;&#x2F;è·å–srcæ–‡ä»¶å¤¹ä¸‹é…ç½®æ–‡ä»¶çš„urlæ ¼å¼çš„è·¯å¾„
            URL res &#x3D; classLoader.getResource(&quot;jdbc.properties&quot;);
            &#x2F;&#x2F;å°†urlè·¯å¾„è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼
            String path &#x3D; res.getPath();

            &#x2F;&#x2F;3.åŠ è½½æ–‡ä»¶
            pro.load(new FileReader(path));

            &#x2F;&#x2F;4.è·å–æ•°æ®ï¼Œèµ‹å€¼
            url &#x3D; pro.getProperty(&quot;url&quot;);
            user &#x3D; pro.getProperty(&quot;user&quot;);
            password &#x3D; pro.getProperty(&quot;password&quot;);
            driver &#x3D; pro.getProperty(&quot;driver&quot;);

            &#x2F;&#x2F;5. æ³¨å†Œé©±åŠ¨
            Class.forName(driver);
        &#125; catch (IOException e) &#123;
            e.printStackTrace();
        &#125; catch (ClassNotFoundException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;

    &#x2F;**
     * è·å–è¿æ¥
     * @return è¿æ¥å¯¹è±¡
     *&#x2F;
    public static Connection getConnection() throws SQLException &#123;
        return DriverManager.getConnection(url, user, password);
    &#125;

    &#x2F;**
     * é‡Šæ”¾èµ„æº
     * @param stmt
     * @param conn
     * @param rs
     *&#x2F;
    public static void close(ResultSet rs, Statement stmt, Connection conn) &#123;
        if(rs !&#x3D; null) &#123;
            try &#123;
                rs.close();
            &#125; catch (SQLException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

        if(stmt !&#x3D; null) &#123;
            try &#123;
                stmt.close();
            &#125; catch (SQLException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
        
        if(conn !&#x3D; null) &#123;
            try &#123;
                conn.close();
            &#125; catch (SQLException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;

    &#125;
&#125;</code></pre>
<h1 id="æ•°æ®åº“è¿æ¥æ± "><a class="markdownIt-Anchor" href="#æ•°æ®åº“è¿æ¥æ± "></a> æ•°æ®åº“è¿æ¥æ± </h1>
<ul>
<li>æ¦‚å¿µï¼š
<ul>
<li>åœ¨ä¸€ä¸ªå®¹å™¨ï¼ˆé›†åˆï¼‰ä¸­å­˜æ”¾æ•°æ®åº“è¿æ¥å¯¹è±¡ï¼ˆConnectionå¯¹è±¡ï¼‰ã€‚</li>
<li>å½“ç³»ç»Ÿåˆå§‹åŒ–åï¼Œå®¹å™¨è¢«åˆ›å»ºï¼Œå®¹å™¨ä¸­ä¼šç”³è¯·éœ€è¦ä½¿ç”¨çš„è¿æ¥å¯¹è±¡ï¼Œå½“ç”¨æˆ·éœ€è¦è®¿é—®æ•°æ®åº“æ—¶ï¼Œä»å®¹å™¨ä¸­è·å–è¿æ¥å¯¹è±¡ï¼Œç”¨æˆ·è®¿é—®å®Œä¹‹åï¼Œä¼šå°†è¿æ¥å¯¹è±¡å½’è¿˜ç»™å®¹å™¨ã€‚</li>
<li>ä¼˜åŒ–äº†ä¹‹å‰çš„åœ¨ç”¨æˆ·éœ€è¦ä½¿ç”¨è¿æ¥å¯¹è±¡æ—¶æ‰ç”³è¯·è¿æ¥å¯¹è±¡ï¼Œç”¨æˆ·ç”¨å®Œå°±é‡Šæ”¾çš„è¿æ¥å¯¹è±¡ä½¿ç”¨æ–¹å¼ï¼ŒèŠ‚çº¦èµ„æºï¼Œæé«˜ç”¨æˆ·è®¿é—®æ•°æ®åº“çš„æ•ˆç‡ã€‚</li>
</ul>
</li>
</ul>
<h2 id="æ•°æ®åº“è¿æ¥æ± å®ç°"><a class="markdownIt-Anchor" href="#æ•°æ®åº“è¿æ¥æ± å®ç°"></a> æ•°æ®åº“è¿æ¥æ± å®ç°</h2>
<ul>
<li>æ ‡å‡†æ¥å£ï¼›DataSourceæ¥å£ï¼Œåœ¨javax.sqlåŒ…ä¸‹ï¼›
<ul>
<li>æ–¹æ³•ï¼š
<ul>
<li>è·å–è¿æ¥ï¼š<code>getConnection()</code></li>
<li>å½’è¿˜è¿æ¥ï¼š<code>Connect.close()</code>ã€‚å¦‚æœè¿æ¥å¯¹è±¡Conneectionæ˜¯ä»è¿æ¥æ± è·å–çš„ï¼Œé‚£ä¹ˆè°ƒç”¨Connection.close()æ–¹æ³•ï¼Œåˆ™ä¸ä¼šå…³é—­è¿æ¥ï¼Œè€Œæ˜¯å½’è¿˜è¿æ¥åˆ°æ•°æ®è¿æ¥æ± ä¸­å»ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>å…·ä½“å®ç°ä¸€èˆ¬æ˜¯ç”±å…·ä½“çš„æ•°æ®åº“å‚å•†æ¥å®Œæˆçš„ï¼Œå¸¸è§çš„æœ‰C3P0ã€Druidï¼ˆé˜¿é‡Œå·´å·´å®ç°çš„ï¼‰ç­‰æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ã€‚</li>
</ul>
<h3 id="c3p0"><a class="markdownIt-Anchor" href="#c3p0"></a> C3P0</h3>
<ul>
<li>æ­¥éª¤ï¼›
<ol>
<li>å¯¼å…¥ä¸‰ä¸ªjaråŒ…ï¼›c3p0-0.9.5.2.jar mchange-commons-java-0.2.12.jar ä»¥åŠæ•°æ®åº“çš„é©±åŠ¨jaråŒ…</li>
<li>ç¬¬ä¸€é…ç½®æ–‡ä»¶
<ol>
<li>åç§°ï¼›c3p0.propertiesæˆ–è€…c3p0-config.xml</li>
<li>è·¯å¾„ï¼šç›´æ¥å°†æ–‡ä»¶æ”¾åœ¨srcç›®å½•ä¸‹å³å¯ã€‚</li>
</ol>
</li>
</ol>
</li>
</ul>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">&lt;c3p0-config&gt;

    &lt;!-- é»˜è®¤é…ç½® --&gt;
    &lt;default-config&gt;
        &lt;!-- è¿æ¥å‚æ•° --&gt;
        &lt;property name &#x3D;&quot;driverClass&quot;&gt;com.mysql.jdbc.Driver&lt;&#x2F;property&gt;
        &lt;property name &#x3D;&quot;jdbcUrl&quot;&gt;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;youth_study&lt;&#x2F;property&gt;
        &lt;property name&#x3D;&quot;user&quot;&gt;root&lt;&#x2F;property&gt;
        &lt;property name&#x3D;&quot;password&quot;&gt;root&lt;&#x2F;property&gt;

        &lt;!-- è¿æ¥æ± å‚æ•° --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;automaticTestTable&quot;&gt;con_test&lt;&#x2F;property&gt; --&gt;
        &lt;property name&#x3D;&quot;checkoutTimeout&quot;&gt;3000&lt;&#x2F;property&gt;
        &lt;!-- &lt;property name&#x3D;&quot;idleConnectionTestPeriod&quot;&gt;30&lt;&#x2F;property&gt; --&gt;
        &lt;property name&#x3D;&quot;initialPoolSize&quot;&gt;5&lt;&#x2F;property&gt;
        &lt;!-- &lt;property name&#x3D;&quot;maxIdleTime&quot;&gt;30&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;maxIdleTimeExcessConnections&quot;&gt;10&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;maxConnectionAge&quot;&gt;60&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;propertyCycle&quot;&gt;1&lt;&#x2F;property&gt; --&gt;
        &lt;property name&#x3D;&quot;maxPoolSize&quot;&gt;10&lt;&#x2F;property&gt;
        &lt;!-- &lt;property name&#x3D;&quot;minPoolSize&quot;&gt;5&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;maxStatements&quot;&gt;0&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;maxStatementsPerConnection&quot;&gt;5&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;maxAdministrativeTaskTime&quot;&gt;4&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;connectionCustomizerClassName&quot;&gt;com.mchange.v2.c3p0.test.TestConnectionCustomizer&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;unreturnedConnectionTimeout&quot;&gt;15&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;debugUnreturnedConnectionStackTraces&quot;&gt;true&lt;&#x2F;property&gt; --&gt;

        &lt;!-- &lt;property name&#x3D;&quot;dataSourceName&quot;&gt;poop&lt;&#x2F;property&gt; --&gt;

        &lt;!-- &lt;property name&#x3D;&quot;driverClass&quot;&gt;org.postgresql.Driver&lt;&#x2F;property&gt; --&gt;
        &lt;!-- &lt;property name&#x3D;&quot;jdbcUrl&quot;&gt;jdbc:postgresql:&#x2F;&#x2F;localhost&#x2F;c3p0-test&lt;&#x2F;property&gt; --&gt;

    &lt;&#x2F;default-config&gt;
    
    &lt;!-- æŒ‡å®šåç§°çš„é…ç½® --&gt;
    &lt;named-config name &#x3D; &quot;otherconfig&quot;&gt;
        &lt;!-- è¿æ¥å‚æ•° --&gt;
        &lt;property name &#x3D;&quot;driverClass&quot;&gt;com.mysql.jdbc.Driver&lt;&#x2F;property&gt;
        &lt;property name &#x3D;&quot;jdbcUrl&quot;&gt;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;youth_study&lt;&#x2F;property&gt;
        &lt;property name&#x3D;&quot;user&quot;&gt;root&lt;&#x2F;property&gt;
        &lt;property name&#x3D;&quot;password&quot;&gt;root&lt;&#x2F;property&gt;

        &lt;!-- è¿æ¥æ± å‚æ•° --&gt;
        &lt;property name&#x3D;&quot;checkoutTimeout&quot;&gt;3000&lt;&#x2F;property&gt;
        &lt;property name&#x3D;&quot;initialPoolSize&quot;&gt;5&lt;&#x2F;property&gt;
        &lt;property name&#x3D;&quot;maxPoolSize&quot;&gt;8&lt;&#x2F;property&gt;
    &lt;&#x2F;named-config&gt;
&lt;&#x2F;c3p0-config&gt;</code></pre>
<ol start="3">
<li>åˆ›å»ºæ ¸å¿ƒå¯¹è±¡:æ•°æ®åº“è¿æ¥æ± å¯¹è±¡ï¼Œ<code>ComboPooledDataSource</code></li>
</ol>
  <pre class="line-numbers language-java" data-language="java"><code class="language-java">&#x2F;&#x2F;è·å–DataSorceï¼Œä½¿ç”¨é»˜è®¤çš„c3p0-config.xmlé…ç½®
 DataSource ds &#x3D; new ComboPooledDataSource();
 &#x2F;&#x2F;è·å–DataSource,æŒ‡å®šåç§°é…ç½®
  DataSource ds &#x3D; new ComboPooledDataSource(&quot;Otherc3p0&quot;);</code></pre>
<ol start="4">
<li>è·å–è¿æ¥ï¼šgetConnection</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">Connection conn &#x3D; ds.getConnection();</code></pre>
<ol start="5">
<li>å½’è¿˜è¿æ¥</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">conn.close();</code></pre>
<h3 id="druid"><a class="markdownIt-Anchor" href="#druid"></a> druid</h3>
<h4 id="ä½¿ç”¨æ­¥éª¤-2"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ­¥éª¤-2"></a> ä½¿ç”¨æ­¥éª¤</h4>
<ol>
<li>å¯¼å…¥jaråŒ…ï¼šdruid-1.0.9.jar</li>
<li>å®šä¹‰é…ç½®æ–‡ä»¶ï¼š
<ol>
<li>æ˜¯<code>.properties</code>æ–‡ä»¶</li>
<li>å¯ä»¥å«ä»»æ„åç§°ï¼Œæ”¾åœ¨ä»»æ„ç›®å½•ä¸‹ï¼Œéœ€è¦æ‰‹åŠ¨åŠ è½½ã€‚</li>
</ol>
</li>
</ol>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties">driverClassName&#x3D;com.mysql.jdbc.Driver
url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;youth_study
username&#x3D;root
password&#x3D;root
# åˆå§‹åŒ–è¿æ¥æ•°é‡
initialSize&#x3D;5
# æœ€å¤§è¿æ¥æ•°é‡
maxActive&#x3D;10
# æœ€é•¿ç­‰å¾…æ—¶é—´
maxWait&#x3D;3000</code></pre>
<ol start="3">
<li>åŠ è½½é…ç½®æ–‡ä»¶</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">Properties pro &#x3D; new Properties(); &#x2F;&#x2F;åˆ›å»ºPropertieså¯¹è±¡
InputStream is &#x3D; DruidDemo.class.getClassLoader().getResourceAsStream(&quot;druid.properties&quot;); &#x2F;&#x2F;è·å–propertiesæ–‡ä»¶çš„è¾“å…¥æµ
pro.load(is); &#x2F;&#x2F;æ ¹æ®è¾“å…¥æµæ¥åŠ è½½é…ç½®æ–‡ä»¶</code></pre>
<ol start="4">
<li>è·å–æ•°æ®åº“è¿æ¥æ± å¯¹è±¡ï¼š
<ol>
<li>é€šè¿‡å·¥å‚ç±»æ¥è·å–ï¼ŒDruidDataSourceFactory,éœ€è¦å°†Propertiesé…ç½®æ–‡ä»¶å¯¹è±¡ä¼ é€’ç»™å·¥å‚æ–¹æ³•ã€‚</li>
</ol>
</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">DataSource ds &#x3D; DruidDataSourceFactory.createDataSource(pro);;</code></pre>
<ol start="5">
<li>è·å–è¿æ¥ï¼šgetConnnection</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">Connection conn &#x3D; ds.getConnection();
System.out.println(conn);</code></pre>
<h4 id="druidå·¥å…·ç±»"><a class="markdownIt-Anchor" href="#druidå·¥å…·ç±»"></a> druidå·¥å…·ç±»</h4>
<ol>
<li>å®šä¹‰ä¸€ä¸ªç±»JDBCUtils</li>
<li>æä¾›é™æ€ä»£ç å—åŠ è½½é…ç½®æ–‡ä»¶ï¼Œåˆå§‹åŒ–è¿æ¥æ± å¯¹è±¡</li>
<li>æä¾›æ–¹æ³•ï¼š
<ol>
<li>è·å–è¿æ¥æ–¹æ³•ï¼šé€šè¿‡æ•°æ®åº“è¿æ¥æ± è·å–è¿æ¥</li>
<li>é‡Šæ”¾èµ„æº</li>
<li>è·å–è¿æ¥æ± çš„æ–¹æ³•</li>
</ol>
</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.Utils;

import com.alibaba.druid.pool.DruidDataSourceFactory;

import javax.sql.DataSource;
import java.io.IOException;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;

&#x2F;**
 * druidè¿æ¥æ± çš„å·¥å…·ç±»
 *&#x2F;
public class JDBCUtils &#123;

    &#x2F;&#x2F;1.å®šä¹‰æˆå‘˜å˜é‡
    private static DataSource ds;

    static &#123;
        try &#123;
            &#x2F;&#x2F;1.åŠ è½½é…ç½®æ–‡ä»¶
            Properties pro &#x3D; new Properties();
            pro.load(JDBCUtils.class.getClassLoader().getResourceAsStream(&quot;druid.properties&quot;));;
            &#x2F;&#x2F;2. è·å–DataSource
            ds &#x3D; DruidDataSourceFactory.createDataSource(pro);
        &#125; catch (IOException e) &#123;
            e.printStackTrace();
        &#125; catch (Exception e) &#123;
            e.printStackTrace();
        &#125;
    &#125;

    &#x2F;**
     * è·å–è¿æ¥
     *&#x2F;
    public static Connection getConnection() throws SQLException &#123;
        return ds.getConnection();
    &#125;

    &#x2F;**
     * é‡Šæ”¾èµ„æº
     *&#x2F;
    public static void close(ResultSet rs, Statement stmt, Connection conn) &#123;
        if (rs !&#x3D; null) &#123;
            try &#123;
                rs.close();
            &#125; catch (SQLException throwables) &#123;
                throwables.printStackTrace();
            &#125;
        &#125;

        if (stmt !&#x3D; null) &#123;
            try &#123;
                stmt.close();
            &#125; catch (SQLException throwables) &#123;
                throwables.printStackTrace();
            &#125;
        &#125;

        if (conn !&#x3D; null) &#123;
            try &#123;
                conn.close(); &#x2F;&#x2F;å½’è¿˜è¿æ¥
            &#125; catch (SQLException throwables) &#123;
                throwables.printStackTrace();
            &#125;
        &#125;
    &#125;

    &#x2F;**
     * é‡Šæ”¾èµ„æºçš„é‡è½½ï¼Œä¸¤ä¸ªå‚æ•°
     *&#x2F;
    public static void close (Statement stmt, Connection conn) &#123;
        JDBCUtils.close(null, stmt, conn);
    &#125;

    &#x2F;**
     * è·å–è¿æ¥æ± 
     *&#x2F;
    public static DataSource getDataSource() &#123;
        return ds;
    &#125;
&#125;</code></pre>
<ul>
<li>å·¥å…·ç±»ä½¿ç”¨ç¤ºä¾‹ï¼š</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.druid;

import com.Utils.JDBCUtils;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Properties;

&#x2F;**
 * ä½¿ç”¨å·¥å…·ç±»
 *&#x2F;
public class DruidDemo2 &#123;
    public static void main(String[] args) &#123;

        &#x2F;&#x2F;æŠŠè¦è¢«é‡Šæ”¾çš„èµ„æºçš„å®šä¹‰æ”¾åœ¨try-catchè¯­å—ä¹‹å¤–ï¼Œä½¿å¾—é‡Šæ”¾èµ„æºæ—¶æ–¹ä¾¿ï¼Œä¸ä¼šå‡ºç°æ²¡æœ‰å®šä¹‰çš„é”™è¯¯
        Connection conn &#x3D; null;
        PreparedStatement pstmt &#x3D; null;
        try &#123;
            &#x2F;&#x2F;1.è·å–è¿æ¥
            conn &#x3D; JDBCUtils.getConnection();
            &#x2F;&#x2F;2. å®šä¹‰sql
            String sql &#x3D; &quot;update t_branch set college_id &#x3D; ? where id &#x3D; ?&quot;;
            &#x2F;&#x2F;3. è·å–PreparedStatementå¯¹è±¡
            pstmt &#x3D; conn.prepareStatement(sql);
            &#x2F;&#x2F;4.ç»™sqlè¯­å¥é‡Œé¢çš„å‚æ•°èµ‹å€¼
            pstmt.setInt(1, 333);
            pstmt.setInt(2,1);
            &#x2F;&#x2F;æ‰§è¡Œsqlè¯­å¥
            int count &#x3D; pstmt.executeUpdate();
            &#x2F;&#x2F;ç»“æœå¤„ç†
            System.out.println(count);
        &#125; catch (SQLException throwables) &#123;
            throwables.printStackTrace();
        &#125;finally &#123;
            &#x2F;&#x2F;é‡Šæ”¾èµ„æº
            JDBCUtils.close(pstmt, conn);
        &#125;
    &#125;
&#125;</code></pre>
<h1 id="spring-jdbc"><a class="markdownIt-Anchor" href="#spring-jdbc"></a> Spring JDBC</h1>
<ul>
<li>Springæ¡†æ¶å¯¹JDBCçš„ç®€å•å°è£…ã€‚æä¾›äº†ä¸€ä¸ª<strong>JDBCTemplateå¯¹è±¡</strong>ç®€åŒ–JDBCçš„å¼€å‘ã€‚</li>
</ul>
<h2 id="spring-jdbcçš„ä½¿ç”¨æ­¥éª¤"><a class="markdownIt-Anchor" href="#spring-jdbcçš„ä½¿ç”¨æ­¥éª¤"></a> Spring JDBCçš„ä½¿ç”¨æ­¥éª¤</h2>
<ol>
<li>å¯¼å…¥jaråŒ…<br />
<img src="https://zjpicture.oss-cn-beijing.aliyuncs.com/giteePic/picgo-master/img/20201207173331.jpg" alt="" /></li>
<li>åˆ›å»ºJDBCTemplateå¯¹è±¡ã€‚ä¾èµ–äºæ•°æ®æºå¯¹è±¡<code>DataSource ds</code>
<ol>
<li><code>JDBCTemplate template = new JDBCTemplate(ds);</code></li>
</ol>
</li>
<li>è°ƒç”¨JDBCTemplateçš„æ–¹æ³•æ¥å®ŒæˆCRUDçš„æ“ä½œï¼š
<ol>
<li><code>update()</code>:æ‰§è¡ŒDMLè¯­å¥ï¼Œå®Œæˆå¢ï¼Œåˆ ï¼Œæ”¹è¯­å¥ã€‚
<ol>
<li>å¦‚æœéœ€è¦å¾€sqlè¯­å¥ä¸­ä¼ å…¥å‚æ•°ï¼Œå°±ä½¿ç”¨<code>update(sql,å‚æ•°1ï¼Œå‚æ•°2...)</code>,å‚æ•°çš„é¡ºåºå°±æ˜¯ä»–ä»¬åœ¨sqlè¯­å¥ä¸­ä»å·¦è‡³å³çš„é¡ºåºã€‚</li>
</ol>
</li>
<li><code>queryForMap()</code>:æŸ¥è¯¢ç»“æœå°†ç»“æœé›†å°è£…ä¸ºMapé›†åˆï¼›
<ol>
<li>æŸ¥è¯¢ç»“æœé›†é•¿åº¦åªèƒ½æ˜¯1ã€‚</li>
</ol>
</li>
<li><code>queryForList()</code>:æŸ¥è¯¢ç»“æœå°†ç»“æœé›†å°è£…ä¸ºListé›†åˆï¼›</li>
<li><code>query()</code>:æŸ¥è¯¢ç»“æœï¼Œå°†ç»“æœå°è£…ä¸ºJavaBeanå¯¹è±¡ï¼›</li>
<li><code>queryForObject()</code>:æŸ¥è¯¢ç»“æœï¼Œå°†ç»“æœé›†å°è£…ä¸ºå¯¹è±¡ï¼ˆä¸€èˆ¬æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼‰ã€‚</li>
</ol>
</li>
<li>ä½¿ç”¨JDBCTemplat<strong>æ— éœ€é‡Šæ”¾èµ„æº</strong>ï¼ˆä¼šè‡ªåŠ¨è¿›è¡Œï¼‰ã€‚</li>
</ol>
<ul>
<li>ä½¿ç”¨ç¤ºä¾‹ï¼š</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">package com.JDBCtemplate;

import com.Utils.JDBCUtils;
import org.springframework.jdbc.core.JdbcTemplate;

&#x2F;**
 * JDBCTemplateå…¥é—¨ä½¿ç”¨
 *&#x2F;
public class JdbcTemplateDemo1 &#123;
    public static void main(String[] args) &#123;
        &#x2F;&#x2F;1.å¯¼å…¥jaråŒ…
        &#x2F;&#x2F;2.åˆ›å»ºJDBCTemplateå¯¹è±¡
        JdbcTemplate template &#x3D; new JdbcTemplate(JDBCUtils.getDataSource());
        &#x2F;&#x2F;3.è°ƒç”¨æ–¹æ³•
        String sql &#x3D; &quot;update t_branch set college_id &#x3D; ? where id &#x3D; ?&quot;;
        &#x2F;&#x2F;4,æ‰§è¡Œsqlå¹¶ä¼ å‚
        int count&#x3D; template.update(sql,555,1);
        System.out.println(count);
    &#125;
&#125;</code></pre>

              </article>
          </article>
      </div>
  </div>

</div>



        </div>


        <!-- <div class="p-5 text-center ">
  <p class="h6"> <a href="https://beian.miit.gov.cn/" target="_blank">èœ€ICPå¤‡2021022902å·-1</a> â€» <a
          href="https://beian.mps.gov.cn/#/query/webSearch" target="_blank">å·å…¬ç½‘å®‰å¤‡51010802032250å·</a></p>
</div> -->

<div class="p-5 text-center">
  <img src="/img/beian_icon.png" alt="å¤‡æ¡ˆå›¾æ ‡" class="icon" style="max-width: 48px; max-height: 48px; vertical-align: middle;">
  <p class="h6">
    <a href="https://beian.miit.gov.cn/" target="_blank">èœ€ICPå¤‡2021022902å·-1</a> â€»
    <a href="https://beian.mps.gov.cn/#/query/webSearch" target="_blank">å·å…¬ç½‘å®‰å¤‡51010802032250å·</a>
  </p>
</div>
</body>

</html>