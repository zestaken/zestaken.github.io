<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <head>
    <link href="/styles/main.css" rel="stylesheet" type="text/css"/>

    <meta charset="UTF-8">
    
    <title>C语言-错误处理与信号处理 - ZestJourney</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/bootstrap/4.6.1/css/bootstrap.min.css">
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/bootstrap/4.6.1/js/bootstrap.min.js"></script>

<script src="https://npm.elemecdn.com/@waline/client@v2/dist/waline.js"></script>
<link
  rel="stylesheet"
  href="https://npm.elemecdn.com/@waline/client@v2/dist/waline.css"
/>
<meta name="generator" content="Hexo 5.4.2"></head>

</head>

<body>
    


        <div>
            <div class="container-fluid position-relative">
                <nav class="navbar navbar-expand-lg navbar-dark  text-white bg-transparent">
                    <div class="container">
                        
                        <a class="navbar-brand" href="/">💖我们的秘密基地💖</a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
                            aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarText">
                            <ul class="navbar-nav mr-auto">
                            </ul>
                            <span class="navbar-text">
                                💕愿你三冬暖，愿你春不寒🍂
                            </span>
                        </div>
                    </div>
                </nav>
                <section class="lover-background"
                    style="background-image: url(/img/banner.jpg)">
                </section>
                <section
                    class="container lover-container d-flex flex-column align-content-center justify-content-center">
                    <div class="row align-items-center pb-5 lover">
                        <div class="col">
                            <div class="d-flex flex-column">
                                <img class="mx-auto avatar-img rounded-circle"
                                    src="/img/zestaken.jpg" alt="">
                                <h4 class="mx-auto text-white pt-2">  
                                    zestaken
                                </h4>
                            </div>
                        </div>
                        <div class="col">
                            <div class="d-flex justify-content-center">
                                <div class="heart"></div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="d-flex flex-column">
                                <img class="mx-auto avatar-img rounded-circle"
                                    src="/img/zinny.jpg" alt="">
                                <h4 class="mx-auto text-white pt-2">
                                    zinny
                                </h4>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="main-hero-waves-area waves-area">
                    <svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                        <defs>
                            <path id="gentle-wave"
                                d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z">
                            </path>
                        </defs>
                        <g class="parallax">
                            <use xlink:href="#gentle-wave" x="48" y="0"></use>
                            <use xlink:href="#gentle-wave" x="48" y="3"></use>
                            <use xlink:href="#gentle-wave" x="48" y="5"></use>
                            <use xlink:href="#gentle-wave" x="48" y="7"></use>
                        </g>
                    </svg>
                </section>
            </div>

            <div id="Pjax">

  <div class="list-content mx-auto mt-5">
      <div id="article" class="list-top">
          <h5 class="list-text"> C语言-错误处理与信号处理
          </h5>
          <article>
              <article>
                <h1 id="errnoh错误"><a class="markdownIt-Anchor" href="#errnoh错误"></a> <code>&lt;errno.h&gt;</code>:错误</h1>
<ul>
<li>标准库中的一些函数通过向<code>&lt;erron.h&gt;</code>中声明的<strong>int型errno变量</strong>存储一个错误码（正整数）来表示有错误发生。</li>
<li>如果使用的一个库函数，通过给errno赋值来产生程序运行出错的信号，我们可以在调用这个函数之后，==检查erron的值是否为0==，来判断函数调用过程中是否有错误发生。</li>
<li>使用errno来检测函数调用的错误，需要==在函数调用前将errno置零==。</li>
<li>errno中存储的错误值经常是以下两个宏：
<ul>
<li><strong>EDOM(定义域错误)</strong>：传递给函数的一个参数==超出了定义域==，使用这个宏。</li>
<li><strong>ERANGE(取值范围错误)</strong>：函数的==返回值太大,无法用返回类型==。</li>
</ul>
</li>
<li>与变量errno有关的两个函数（都不属于<code>&lt;errno.h&gt;</code>）:
<ul>
<li><strong>perror</strong>函数：
<ul>
<li>在<code>&lt;stdio.h&gt;</code>中声明，用于显示描述错误的信息；perror函数会==输出到stderr流==。</li>
<li>原型：<code>void perror(const char *s)</code></li>
<li>参数：
<ul>
<li>一个作为部分错误消息的字符串。</li>
</ul>
</li>
<li>返回值：
<ul>
<li>依次显示下列内容：
<ol>
<li>调用perror的参数；</li>
<li>一个分号；</li>
<li>一个空格；</li>
<li>一条出错消息：消息的内容根据errno的值决定；</li>
<li>一个换行符。</li>
</ol>
</li>
<li>示例：<code>perror(&quot;sqrt error&quot;); sqrt error: Numercial argument out of domain</code></li>
</ul>
</li>
</ul>
</li>
<li><strong>strerror</strong>函数：
<ul>
<li>在<code>&lt;string.h&gt;</code>声明，当以错误码为参数调用strerror时，函数会==返回一个指针,它指向一个描述这个错误的字符串==；</li>
<li>原型：<code>char *strerror(int errnum)</code></li>
<li>参数：
<ul>
<li>strerror函数的参数==通常是errno的值==，但以任意整数为参数都能返回一个字符串。</li>
</ul>
</li>
<li>示例：<code>puts(strerror(EDOM))</code></li>
</ul>
</li>
<li>对于同一个错误，perror函数和strerror函数返回的消息的值是相同的。</li>
</ul>
</li>
<li>示例：</li>
</ul>
<pre class="line-numbers language-c" data-language="c"><code class="language-c">errno &#x3D; 0;

y &#x3D; sqrt(x);
if(errno !&#x3D; 0) &#123;
    perror(&quot;sqrt error&quot;);
    puts(strerror(erron));
&#125;</code></pre>
<h1 id="signalh信号处理"><a class="markdownIt-Anchor" href="#signalh信号处理"></a> <code>&lt;signal.h&gt;</code>：信号处理</h1>
<ul>
<li><code>&lt;signal.h&gt;</code>提供了==处理异常情况（异常情况又称为信号）的工具==。</li>
<li><strong>信号</strong>：当有错误或者外部事件发生时，称为产生了一个信号。很多信号可以在程序执行过程中的任意时刻发生。</li>
<li><strong>信号类型</strong>：
<ul>
<li>==运行时错误==，如（除以0）；</li>
<li>==发生在程序以外的事件==，如：操作系统对正在运行的程序的中断信号。</li>
</ul>
</li>
<li><strong>信号宏</strong>：
<ul>
<li>信号宏：<code>&lt;signal.h&gt;</code>中定义了一系列的宏,==用于表示不同的信号==；</li>
<li>6种信号宏：
<ol>
<li><code>SIGABRT</code>:异常终止；</li>
<li><code>SIGFPE</code>:在算术运算中发生错误；</li>
<li><code>SIGILL</code>:无效指令；</li>
<li><code>SIGINT</code>:中断；</li>
<li><code>SIGSEGV</code>:无效存储访问；</li>
<li><code>SIGTERM</code>:终止请求。</li>
</ol>
</li>
</ul>
</li>
<li><strong>signal</strong>函数：
<ul>
<li>signal是<code>&lt;signal.h&gt;</code>提供的，用来==安装信号处理函数，以便将来给定的信号发生时使用==。</li>
<li>原型：<code>void (*signal(int sig, void (*func)(int)))(int)</code></li>
<li>参数：
<ul>
<li>第一个参数是==特定信号的编码（表示不同信号的宏）==；</li>
<li>第二个参数是==一个指向会在信号发生时处理这一信号的函数的指针==；</li>
</ul>
</li>
<li>返回值：
<ul>
<li>一旦调用信号处理函数返回,==程序会从信号发生点恢复并继续执行==，除了SIGABRT和SIGFPE两种信号。</li>
<li>signal的返回值是一个==指向指定信号的前一个处理函数的指针==。可以用于恢复原来的处理函数。</li>
<li>如果一个signal函数调用失败，==会返回SIG_ERR（一个在<code>&lt;signal.h&gt;</code>中定义的宏）并在errno中存入一个正值。==</li>
</ul>
</li>
</ul>
</li>
<li><strong>信号处理函数</strong>:
<ul>
<li>自定义信号处理函数：
<ul>
<li>每个信号处理函数都必须有一个==int类型的参数==，且返回类型为void。</li>
<li>当一个特定的信号产生并调用相应的信号处理函数时，==信号的编码会作为参数传递给处理函数==。</li>
</ul>
</li>
<li>预定义的信号处理函数：<code>&lt;signal.h&gt;</code>提供了一些预定义的信号处理函数,这些函数==都是用宏表示的==。
<ul>
<li><strong>SIG_DFL</strong>:
<ul>
<li>按==默认==方式处理信号。</li>
<li>调用该函数的结果是由实现定义的，但大多数情况下会导致程序终止。</li>
</ul>
</li>
<li><strong>SIG_IGN</strong>:
<ul>
<li>当指定的信号产生时，==忽略该信号==；</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>raise</strong>函数：
<ul>
<li><code>&lt;signal.h&gt;</code>中声明，用来==使程序主动触发信号==。</li>
<li>原型：<code>int raise(int sig)</code></li>
<li>参数：
<ul>
<li>sig参数用于==指定所需信号的编码==；</li>
</ul>
</li>
<li>返回值：
<ul>
<li>raise函数的返回值，代表产生信号是否成功：==成功为0，失败为非0==。</li>
</ul>
</li>
</ul>
</li>
</ul>

              </article>
          </article>
      </div>
  </div>

</div>



        </div>


        <!-- <div class="p-5 text-center ">
  <p class="h6"> <a href="https://beian.miit.gov.cn/" target="_blank">蜀ICP备2021022902号-1</a> ※ <a
          href="https://beian.mps.gov.cn/#/query/webSearch" target="_blank">川公网安备51010802032250号</a></p>
</div> -->

<div class="p-5 text-center">
  <img src="/img/beian_icon.png" alt="备案图标" class="icon" style="max-width: 48px; max-height: 48px; vertical-align: middle;">
  <p class="h6">
    <a href="https://beian.miit.gov.cn/" target="_blank">蜀ICP备2021022902号-1</a> ※
    <a href="https://beian.mps.gov.cn/#/query/webSearch" target="_blank">川公网安备51010802032250号</a>
  </p>
</div>
</body>

</html>